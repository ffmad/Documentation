<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Counterparty Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Counterparty Blog Atom Feed"><title data-react-helmet="true">Counterwallet notes | Counterparty</title><meta data-react-helmet="true" property="og:url" content="https://ffmad.github.io/docs/wallets/counterwallet-notes"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Counterwallet notes | Counterparty"><meta data-react-helmet="true" name="description" content="More on multiple Counterwallet servers"><meta data-react-helmet="true" property="og:description" content="More on multiple Counterwallet servers"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://ffmad.github.io/docs/wallets/counterwallet-notes"><link data-react-helmet="true" rel="alternate" href="https://ffmad.github.io/docs/wallets/counterwallet-notes" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://ffmad.github.io/docs/wallets/counterwallet-notes" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.5136cec4.css">
<link rel="preload" href="/assets/js/styles.3bec8e7c.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.85ef5a3f.js" as="script">
<link rel="preload" href="/assets/js/main.9a984a6f.js" as="script">
<link rel="preload" href="/assets/js/1.d5f96000.js" as="script">
<link rel="preload" href="/assets/js/2.51cf87d3.js" as="script">
<link rel="preload" href="/assets/js/55.4d55144e.js" as="script">
<link rel="preload" href="/assets/js/56.1e9741af.js" as="script">
<link rel="preload" href="/assets/js/935f2afb.912e5501.js" as="script">
<link rel="preload" href="/assets/js/17896441.cde37ae1.js" as="script">
<link rel="preload" href="/assets/js/cd9a7e32.2e40a10d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/xcp.png" alt="Counterparty" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/xcp.png" alt="Counterparty" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Counterparty</strong></a><a class="navbar__item navbar__link" href="/docs/basics/what-is-counterparty/a-bitcoin-protocol">Basics</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/wallets/counterwallet">Wallets</a><a class="navbar__item navbar__link" href="/docs/advanced/architecture">Advanced</a><a class="navbar__item navbar__link" href="/docs/develop/api/overview">Develop</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/CounterpartyXCP/Documentation" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/xcp.png" alt="Counterparty" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/xcp.png" alt="Counterparty" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Counterparty</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/basics/what-is-counterparty/a-bitcoin-protocol">Basics</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/wallets/counterwallet">Wallets</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/advanced/architecture">Advanced</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/develop/api/overview">Develop</a></li><li class="menu__list-item"><a href="https://github.com/CounterpartyXCP/Documentation" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/wallets/counterwallet">Counterwallet FAQ</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Counterwallet Tutorials</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/wallets/counterwallet-tutorials/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/wallets/counterwallet-tutorials/create-addresses">Creating a new address</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/wallets/counterwallet-tutorials/dex-trade">Decentralized Exchange</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/wallets/counterwallet-tutorials/multisig">Using multisig with Counterwallet</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/wallets/counterwallet-tutorials/show-qrcode">Show QR Code for Address</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/wallets/counterwallet-tutorials/get-token-info">Get Token Information</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/wallets/counterwallet-tutorials/create-token">Create a Token/NFTs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/wallets/counterwallet-tutorials/change-token-settings">Change Token Settings</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/wallets/counterwallet-tutorials/pay-distribution">How to Proportionally Distribute Funds to Token Holders</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/wallets/counterwallet-tutorials/broadcast">Broadcast information on the Bitcoin blockchain</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/wallets/counterwallet-tutorials/voting">Voting with Tokens</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/wallets/counterwallet-tutorials/buy-sell">Buy and sell assets (tokens) on the DEx using XCP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/wallets/counterwallet-tutorials/create-armory-addresses">Creating an Armory Offline Wallet for Cold Storage</a></li></ul></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/docs/wallets/counterwallet-notes">Counterwallet notes</a></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Counterwallet notes</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="more-on-multiple-counterwallet-servers"></a>More on multiple Counterwallet servers<a class="hash-link" href="#more-on-multiple-counterwallet-servers" title="Direct link to heading">#</a></h2><p>For the time being, the Counterparty team itself operates the primary Counterwallet platform at <code>counterwallet.io</code>. However, as Counterwallet is open source software, it is possible to host your own site with Counterwallet site (for your personal use, or as an offering to others), or to even host your own Counterwallet servers to use with your own Counterparty wallet implementation. The Counterparty team supports and encourages this kind of activity (as long as the servers are secure), as it aids with increasing decentralization.</p><p>Also note that due to the nature of Counterwallet being a deterministic wallet, users using one Counterwallet platform (i.e. the official one, for instance) have the flexibility to start using a different Counterwallet platform instead at any time, and as funds (i.e. private keys) are not stored on the server in any fashion, they will be able to see their funds on either. (Note that the only thing that will not migrate are saved preferences, such as address aliases, the theme setting, etc.)</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="counterwallet-multiapi-specifics"></a>Counterwallet MultiAPI specifics<a class="hash-link" href="#counterwallet-multiapi-specifics" title="Direct link to heading">#</a></h2><p>Counterwallet utilizes a sort of a &quot;poor man&#x27;s load balancing/failover&quot; implementation called multiAPI (and implemented
<a href="https://github.com/CounterpartyXCP/counterwallet/blob/master/src/js/util.api.js" target="_blank" rel="noopener noreferrer">here</a>). multiAPI can operate in a number of fashions.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="multiapifailover-for-read-api-get_-operations"></a>multiAPIFailover for Read API (<code>get_</code>) Operations<a class="hash-link" href="#multiapifailover-for-read-api-get_-operations" title="Direct link to heading">#</a></h3><p><em>multiAPIFailover</em> functionality is currently used for all read API operations. In this model, the first Federated Node
on the shuffled list is called for the data, and if it returns an error or the request times out, the second one on the
list is called, and so on. The result of the first server to successfully return are used.</p><p>Here, a &quot;hacked&quot; server could be modified to return bogus data. As (until being discovered) the server would be in the
shuffled list, some clients may end up consulting it. However, as this functionality is essentially for data queries only,
the worse case result is that a Counterwallet client is shown incorrect/modified data which leads to misinformed actions
on the user&#x27;s behalf. Moreover, the option always exists to move all read-queries to use multiAPIConsensus in the future should the need arise.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="multiapiconsensus-for-actionwrite-create_-operations"></a>multiAPIConsensus for Action/Write (<code>create_</code>) Operations<a class="hash-link" href="#multiapiconsensus-for-actionwrite-create_-operations" title="Direct link to heading">#</a></h3><p>Based on this multiAPI capability, the wallet itself consults more than one of these Federated Nodes via consensus especially
for all <code>create_</code>-type operations. For example, if you send XCP, <code>counterparty-server</code> on each server is still composing and sending
back the unsigned raw transaction, but for data security, it compares the results returned from all servers, and will
only sign and broadcast (both client-side) if all the results match). This is known as <em>multiAPIConsensus</em>.</p><p>The ultimate goal here is to have a federated net of semi-trusted backend servers not tied to any one country, provider, network or
operator/admin. Through requiring consensus on the unsigned transactions returned for all <code>create_</code> operations, &#x27;semi-trust&#x27;
on a single server basis leads to an overall trustworthy network. Worst case, if backend server is hacked and owned
(and the <code>counterparty-server</code> code modified), then you may get some invalid read results, but it won&#x27;t be rewriting your XCP send
destination address, for example. The attackers would have to hack the code on every single server in the same exact
way, undetected, to do that.</p><p>Moreover, the Counterwallet web client contains basic transaction validation code that will check that any unsigned Bitcoin
transaction returned from a Counterblock Federated Node contains expected inputs and outputs. This provides further
protection against potential attacks.</p><p>multiAPIConsensus actually helps discover any potential &quot;hacked&quot; servers as well, since a returned consensus set with
a divergent result will be rejected by the client, and thus trigger an examination of the root cause by the team.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="multiapinewest-for-redundant-storage"></a>multiAPINewest for Redundant storage<a class="hash-link" href="#multiapinewest-for-redundant-storage" title="Direct link to heading">#</a></h3><p>In the same way, these multiple servers are used to provide redundant storage of client-side preferences, to ensure we
have no single point of failure. In the case of the stored preferences for instance, when retrieved on login, the data from all servers
is taken in, and the newest result is used. This <em>multiAPINewest</em> functionality effectively makes a query across all available
Federated Nodes, and chooses the newest result (based on a &quot;last updated&quot;-type timestamp).</p><p>Note that with this, a &quot;hacked&quot; server could be modified to always return the latest timestamp, so that its results
were used. However, wallet preferences (and other data stored via this functionality) is non-sensitive, and thus user&#x27;s
funds would not be at risk before the hacked server could be discovered and removed.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/wallets/counterwallet-notes.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/wallets/counterwallet-tutorials/create-armory-addresses"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Creating an Armory Offline Wallet for Cold Storage</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#more-on-multiple-counterwallet-servers" class="table-of-contents__link">More on multiple Counterwallet servers</a></li><li><a href="#counterwallet-multiapi-specifics" class="table-of-contents__link">Counterwallet MultiAPI specifics</a><ul><li><a href="#multiapifailover-for-read-api-get_-operations" class="table-of-contents__link">multiAPIFailover for Read API (<code>get_</code>) Operations</a></li><li><a href="#multiapiconsensus-for-actionwrite-create_-operations" class="table-of-contents__link">multiAPIConsensus for Action/Write (<code>create_</code>) Operations</a></li><li><a href="#multiapinewest-for-redundant-storage" class="table-of-contents__link">multiAPINewest for Redundant storage</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/basics/what-is-counterparty/a-bitcoin-protocol">Getting Started</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/wsjKtPGrMF" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://counterpartytalk.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum</a></li><li class="footer__item"><a href="https://www.reddit.com/r/counterparty_xcp/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reddit</a></li><li class="footer__item"><a href="https://t.me/Counterparty_XCP" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram</a></li><li class="footer__item"><a href="https://twitter.com/CounterpartyXCP" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/CounterpartyXCP/Documentation" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2014 - 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/styles.3bec8e7c.js"></script>
<script src="/assets/js/runtime~main.85ef5a3f.js"></script>
<script src="/assets/js/main.9a984a6f.js"></script>
<script src="/assets/js/1.d5f96000.js"></script>
<script src="/assets/js/2.51cf87d3.js"></script>
<script src="/assets/js/55.4d55144e.js"></script>
<script src="/assets/js/56.1e9741af.js"></script>
<script src="/assets/js/935f2afb.912e5501.js"></script>
<script src="/assets/js/17896441.cde37ae1.js"></script>
<script src="/assets/js/cd9a7e32.2e40a10d.js"></script>
</body>
</html>